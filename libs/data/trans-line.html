<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>d3-2</title>
    <style type="text/css">
        .axis path,
        .axis line {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
        }

        .axis text {
            font-family: sans-serif;
            font-size: 11px;
        }
    </style>
</head>
<body>
</body>
<script src="../js/lib/d3-3.0.js"></script>
<script>
    var width = 480
    var height = 200;
    var svg = d3.select("body").append("svg").attr("width", width).attr("height", height);
    var rect = svg.append("rect").attr("fill", "steelblue").attr({x: 10, y: 10, width: 100, height: 30})
    var rectTran = rect.transition()
            .duration(2000).ease("back-in")
            .attrTween("width", function (d, i, a) {
                return function (t) {
                    return Number(a) + t * 300
                }
            })
            .transition().attr("width", 0)
            .remove()

    var text = svg.append("text")
            .attr("fill", "white")
            .attr({x: 100, y: 10, dy: "1.2em", "text-anchor": "end"})
            .text(100)
    var initx = text.attr("x")
    var initText = text.text()
    var textTran = text.transition()
            .duration(2000).ease("back")
            .tween("text", function () {
                return function (t) {
                    d3.select(this)
                            .attr("x", Number(initx) + t * 300)
                            .text(Math.floor(Number(initText) + t * 300))
                }
            }).transition().remove()

</script>
</html>